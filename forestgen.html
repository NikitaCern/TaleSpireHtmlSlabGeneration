<html>
<head>
    <title>Forest Generator</title>

    <!-- Local asset data -->    
    <script src="talespireslabs.js"></script>
    <script src="pregenforest.js"></script>

    <style>
        .btn-group button {
          background-color: #4CAF50; /* Green background */
          border: 1px solid green; /* Green border */
          color: white; /* White text */
          padding: 10px 24px; /* Some padding */
          margin-right: 22px;
          cursor: pointer; /* Pointer/hand icon */
          float: left; /* Float the buttons side by side */
        }

        .btn-group button:not(:last-child) {
          border-right: none; /* Prevent double borders */
        }

        /* Clear floats (clearfix hack) */
        .btn-group:after {
          content: "";
          clear: both;
          display: table;
        }

        /* Add a background color on hover */
        .btn-group button:hover {
          background-color: #3e8e41;
        }
        textarea {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-left: 3px solid #f36d33;
            color: #666;
            page-break-inside: avoid;
            font-family: monospace;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 1.6em;
            max-width: 100%;
            overflow: auto;
            padding: 1em 1.5em;
            display: block;
            word-wrap: break-word;
        }
        /* The snackbar - position it at the bottom and in the middle of the screen */
        #snackbar {
          visibility: hidden; /* Hidden by default. Visible on click */
          min-width: 250px; /* Set a default minimum width */
          margin-left: -125px; /* Divide value of min-width by 2 */
          background-color: #333; /* Black background color */
          color: #fff; /* White text color */
          text-align: center; /* Centered text */
          border-radius: 2px; /* Rounded borders */
          padding: 16px; /* Padding */
          position: fixed; /* Sit on top of the screen */
          z-index: 1; /* Add a z-index if needed */
          left: 50%; /* Center the snackbar */
          bottom: 30px; /* 30px from the bottom */
        }

        /* Show the snackbar when clicking on a button (class added with JavaScript) */
        #snackbar.show {
          visibility: visible; /* Show the snackbar */
          /* Add animation: Take 0.5 seconds to fade in and out the snackbar.
          However, delay the fade out process for 2.5 seconds */
          -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
          animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        /* Animations to fade the snackbar in and out */
        @-webkit-keyframes fadein {
          from {bottom: 0; opacity: 0;}
          to {bottom: 30px; opacity: 1;}
        }

        @keyframes fadein {
          from {bottom: 0; opacity: 0;}
          to {bottom: 30px; opacity: 1;}
        }

        @-webkit-keyframes fadeout {
          from {bottom: 30px; opacity: 1;}
          to {bottom: 0; opacity: 0;}
        }

        @keyframes fadeout {
          from {bottom: 30px; opacity: 1;}
          to {bottom: 0; opacity: 0;}
        }        
    </style>
    <script>
    


    create_payload = [
    {
        'nguid': 'ed9bc853-bed5-443c-b45f-a7133d55011a', 
        'assets': [
            {
                'rotation': 4, 
                'bounds': 
                {
                    'center': {'x': 1, 'y': 1, 'z': 1}, 
                    'extents': {'x': 1, 'y': 1, 'z': 1}
                }
            },
            {
                'rotation': 4, 
                'bounds': 
                {
                    'center': {'x': 3, 'y': 1, 'z': 3}, 
                    'extents': {'x': 1, 'y': 1, 'z': 1}
                }
            }
        ]
    }
    ]

    test_create_payload = [
    {
        'nguid': '01c3a210-94fb-449f-8c47-993eda3e7126', 
        'assets': [
            {
                'rotation': 4, 
                'bounds': 
                {
                    'center': {'x': 3, 'y': 6, 'z': 9}, 
                    'extents': {'x': 2, 'y': 5, 'z': 8}
                }
            },
            {
                'rotation': 2, 
                'bounds': 
                {
                    'center': {'x': 1.5, 'y': 1.6, 'z': 1.7}, 
                    'extents': {'x': 2.1, 'y': 2.2, 'z': 2.3}
                }
            }
        ]
    },
    {
        'nguid': 'd5b7910a-ae06-4ad3-91f6-cbbd8782bbea', 
        'assets': [
            {
                'rotation': 0, 
                'bounds': 
                {
                    'center': {'x': 1, 'y': 1, 'z': 1}, 
                    'extents': {'x': 2, 'y': 2, 'z': 2}
                }
            },
            {
                'rotation': 2, 
                'bounds': 
                {
                    'center': {'x': 0, 'y': 0, 'z': 0}, 
                    'extents': {'x': 2.1, 'y': 2.2, 'z': 2.3}
                }
            }
        ]
    }    

    ];


    function CopyToClipboard() {
        var forest = document.getElementById("forest");
        forest.select();
        document.execCommand('copy');
        var x = document.getElementById("snackbar");
        x.className = "show";
        setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);          
    }

    function clearPrintResults() {
        document.getElementById('output').innerHTML = "";
    }

    function printResults(message) {
        document.getElementById('output').innerHTML += '<p>' + message + '</p>';
    };

    function WriteRandomForest() { 
        clearPrintResults();
        var randString = gen[Math.floor(Math.random() * gen.length)];
        document.getElementById("forest").value = randString;

        printResults(TalespireSlabs.DecodeSlab(randString));
    }    

    function CreateSlab() {
        clearPrintResults();
        var results = TalespireSlabs.CreateSlab(create_payload);
        document.getElementById("forest").value = results;
        printResults(TalespireSlabs.DecodeSlab(results));
    }

    function ReadSlab() {
        clearPrintResults();
        printResults(TalespireSlabs.DecodeSlab(document.getElementById("forest").value));
    }
    </script>
</head>
<body>
    <h1>Forest Generator</h1>
    <form onSubmit="return false;">
        <textarea style="height: 200px; width: 700px; resize: vertical;" id="forest"></textarea>
        <div style="width: 720px" class="btn-group">
            <button id="button" onclick = "WriteRandomForest();">Get Random Forest</button>
            <button style="background: #66A" id="button" onclick="CopyToClipboard();">Copy To Clipboard</button>
            <button style="float: right" id="button" onclick='ReadSlab();'>Read Slab</button>
            <button style="background: #66A" id="button" onclick="CreateSlab();">Create Slab</button>

        </div>
    </form>
    <p style="width: 700px; background: #EEE; margin-left: 10px" id="output"></p>
    <div id="snackbar">Copied to Clipboard</div>
</body>
</html>
